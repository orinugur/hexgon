//물리적인 부분은 괜찮으나 육각형의 면들이 그룹화되어있지않은데? 육각형을 그룹화하여 중심기준회전하게
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>중심 기준 회전하는 빈 육각형</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
  <style>
    canvas { background: #222; }
  </style>
</head>
<body>
<canvas id="world"></canvas>
<script>
const { Engine, Render, Runner, Bodies, Body, Composite, World, Events } = Matter;

const engine = Engine.create();
const world = engine.world;

const width = 800, height = 600;
const render = Render.create({
  element: document.body,
  engine: engine,
  canvas: document.getElementById('world'),
  options: {
    width, height, wireframes: false, background: '#222'
  }
});

// 육각형 외곽을 6개의 벽으로 만듦 (빈 공간)
const centerX = width / 2, centerY = height / 2;
const hexRadius = 120;
const wallThickness = 16;
const hexWalls = [];
for (let i = 0; i < 6; i++) {
  const angle = Math.PI / 3 * i;
  const x = centerX + Math.cos(angle) * hexRadius;
  const y = centerY + Math.sin(angle) * hexRadius;
  // 각 벽의 중심 좌표와 각도 계산
  const wall = Bodies.rectangle(
    x, y,
    hexRadius * 2 * Math.sin(Math.PI / 6), // 벽 길이
    wallThickness,
    {
      isStatic: true,
      angle: angle + Math.PI / 6,
      render: { fillStyle: '#00eaff' }
    }
  );
  hexWalls.push(wall);
}
// 복합 바디로 그룹화
const hexagon = Composite.create();
hexWalls.forEach(wall => Composite.add(hexagon, wall));
World.add(world, hexagon);

// 육각형 회전 (복합 바디 전체 회전)
const angularVelocity = 0.02;
Events.on(engine, 'beforeUpdate', () => {
  Composite.rotate(hexagon, angularVelocity, { x: centerX, y: centerY });
});

// 바닥 및 벽 생성
World.add(world, [
  Bodies.rectangle(width/2, height-10, width, 20, { isStatic: true }),
  Bodies.rectangle(10, height/2, 20, height, { isStatic: true }),
  Bodies.rectangle(width-10, height/2, 20, height, { isStatic: true })
]);

// 공 추가 (육각형 위쪽에서 떨어뜨림)
for (let i = 0; i < 10; i++) {
  World.add(world, Bodies.circle(centerX + (Math.random()-0.5)*60, 80 + i*30, 18, {
    restitution: 0.8,
    render: { fillStyle: '#ffb300' }
  }));
}

Render.run(render);
Runner.run(engine);
</script>
</body>
</html>