//복합바디로 그룹화는 정상적으로 확인됨, 하지만 직선도형의 끝과끝을 이어서 육각형을 만들어야지 지금은 육각형의 꼭짓점 끝에 배치되어있음
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>정확히 이어지는 빈 육각형</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
  <style>
    canvas { background: #222; }
  </style>
</head>
<body>
<canvas id="world"></canvas>
<script>
const { Engine, Render, Runner, Bodies, Composite, World, Events } = Matter;

const engine = Engine.create();
const world = engine.world;

const width = 800, height = 600;
const render = Render.create({
  element: document.body,
  engine: engine,
  canvas: document.getElementById('world'),
  options: {
    width, height, wireframes: false, background: '#222'
  }
});

// 육각형 파라미터
const centerX = width / 2, centerY = height / 2;
const hexRadius = 120;
const wallThickness = 16;
const numSides = 6;
const wallLength = 2 * hexRadius * Math.sin(Math.PI / numSides); // 한 변의 길이

const hexWalls = [];
for (let i = 0; i < numSides; i++) {
  // 두 꼭짓점 좌표
  const angle1 = (2 * Math.PI / numSides) * i;
  const angle2 = (2 * Math.PI / numSides) * ((i + 1) % numSides);
  const x1 = centerX + Math.cos(angle1) * hexRadius;
  const y1 = centerY + Math.sin(angle1) * hexRadius;
  const x2 = centerX + Math.cos(angle2) * hexRadius;
  const y2 = centerY + Math.sin(angle2) * hexRadius;
  // 중점
  const mx = (x1 + x2) / 2;
  const my = (y1 + y2) / 2;
  // 각도
  const angle = Math.atan2(y2 - y1, x2 - x1);

  const wall = Bodies.rectangle(
    mx, my,
    wallLength, wallThickness,
    {
      isStatic: true,
      angle: angle,
      render: { fillStyle: '#00eaff' }
    }
  );
  hexWalls.push(wall);
}

// 복합 바디로 그룹화
const hexagon = Composite.create();
hexWalls.forEach(wall => Composite.add(hexagon, wall));
World.add(world, hexagon);

// 육각형 회전 (복합 바디 전체 회전)
const angularVelocity = 0.02;
Events.on(engine, 'beforeUpdate', () => {
  Composite.rotate(hexagon, angularVelocity, { x: centerX, y: centerY });
});

// 바닥 및 벽 생성
World.add(world, [
  Bodies.rectangle(width/2, height-10, width, 20, { isStatic: true }),
  Bodies.rectangle(10, height/2, 20, height, { isStatic: true }),
  Bodies.rectangle(width-10, height/2, 20, height, { isStatic: true })
]);

// 공 추가 (육각형 위쪽에서 떨어뜨림)
for (let i = 0; i < 10; i++) {
  World.add(world, Bodies.circle(centerX + (Math.random()-0.5)*60, 80 + i*30, 18, {
    restitution: 0.8,
    render: { fillStyle: '#ffb300' }
  }));
}

Render.run(render);
Runner.run(engine);
</script>
</body>
</html>